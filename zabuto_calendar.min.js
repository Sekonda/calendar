if("undefined"==typeof jQuery)throw new Error("jQuery is not loaded");$.fn.zabuto_calendar=function(a){var e=$.extend({},$.fn.zabuto_calendar_defaults(),a),t=$.fn.zabuto_calendar_language(e.language);return e=$.extend({},e,t),this.each(function(){var o=$(this);function w(a,e,t,n){var r=new Date(t,n,1,0,0,0,0);return a.data("currDate",r),e.empty(),e=function(a,e,t,n){a.data("ajaxSettings");var r=function(a,e){var t=S(a,e),n=D(a,e,1),r=D(a,e,t),d=t,s=n-r;0<s&&(d+=s);return Math.ceil(d/7)}(t,n),d=S(t,n),s=D(t,n,1),o=D(t,n,d),l=1;0===a.data("weekStartsOn")&&(6==o&&r++,6!=s||0!=o&&1!=o&&5!=o||r--,7==++s&&(s=0));for(var i=0;i<r;i++){for(var u=$('<tr class="calendar-dow"></tr>'),c=0;c<7;c++){if(c<s||d<l)u.append("<td></td>");else{var b=!1;0<=a.data("disabledDays").indexOf(c)&&(b=!0),!b&&0<=a.data("disabledDates").indexOf(M(t,n,l))&&(b=!0);var v=a.attr("id")+"_"+M(t,n,l),p=v+"_day",m=$('<div id="'+p+'" class="day" >'+l+"</div>");m.data("day",l),_=t,g=n,f=l,y=void 0,y=new Date,new Date(_,g,f).toDateString()==y.toDateString()&&(m.addClass("today"),!0===a.data("showToday")&&m.html('<span class="badge badge-today">'+l+"</span>"));var h=$('<td id="'+v+'"></td>');h.append(m),h.data("date",M(t,n,l)),h.data("hasEvent",!1),b?h.addClass("dow-disabled"):"function"==typeof a.data("actionFunction")&&(h.addClass("dow-clickable"),h.click(function(){a.data("selectedDate",$(this).data("date"))}),h.click(a.data("actionFunction"))),u.append(h),l++}6==c&&(s=0)}e.append(u)}var _,g,f,y;return e}(a,e=function(a,e){if(!0===a.data("showDays")){var t=a.data("weekStartsOn"),n=a.data("dowLabels");if(0===t){var r=$.extend([],n),d=new Array(r.pop());n=d.concat(r)}var s=$('<tr class="calendar-dow-header"></tr>');$(n).each(function(a,e){s.append("<th>"+e+"</th>")}),e.append(s)}return e}(a,e=function(e,t,a,n){var r=e.data("navIcons"),d=$('<span><span class="glyphicon glyphicon-chevron-left"></span></span>'),s=$('<span><span class="glyphicon glyphicon-chevron-right"></span></span>');"object"==typeof r&&("prev"in r&&d.html(r.prev),"next"in r&&s.html(r.next));var o=e.data("showPrevious");"number"!=typeof o&&!1!==o||(o=k(e.data("showPrevious"),!0));var l=$('<div class="calendar-month-navigation"></div>');if(l.attr("id",e.attr("id")+"_nav-prev"),l.data("navigation","prev"),!1!==o){var i=n-1,u=a;-1==i&&(u-=1,i=11),l.data("to",{year:u,month:i+1}),l.append(d),"function"==typeof e.data("actionNavFunction")&&l.click(e.data("actionNavFunction")),l.click(function(a){w(e,t,u,i)})}var c=e.data("showNext");"number"!=typeof c&&!1!==c||(c=k(e.data("showNext"),!1));var b=$('<div class="calendar-month-navigation"></div>');if(b.attr("id",e.attr("id")+"_nav-next"),b.data("navigation","next"),!1!==c){var v=n+1,p=a;12==v&&(p+=1,v=0),b.data("to",{year:p,month:v+1}),b.append(s),"function"==typeof e.data("actionNavFunction")&&b.click(e.data("actionNavFunction")),b.click(function(a){w(e,t,p,v)})}var m=e.data("monthLabels"),h=$("<td></td>").append(l),_=$("<td></td>").append(b),g=$("<span>"+m[n]+" "+a+"</span>");g.dblclick(function(){var a=e.data("initDate");w(e,t,a.getFullYear(),a.getMonth())});var f=$('<td colspan="5"></td>');f.append(g);var y=$('<tr class="calendar-month-header"></tr>');return y.append(h,f,_),t.append(y),t}(a,e,t,n)),t,n),l(a,t,n),e}function l(a,e,t){var n,r,d=a.data("jsonData"),s=a.data("ajaxSettings");return a.data("events",!1),!1!==d?(r=(n=a).data("jsonData"),n.data("events",r),i(n,"json"),!0):!1===s||function(a,e,t){var n=a.data("ajaxSettings");if("object"!=typeof n||void 0===n.url)return alert("Invalid calendar event settings"),!1;var r={year:e,month:t+1};return $.ajax({type:"GET",url:n.url,data:r,dataType:"json"}).done(function(t){var n=[];$.each(t,function(a,e){n.push(t[a])}),a.data("events",n),i(a,"ajax")}),!0}(a,e,t)}function i(i,u){i.data("jsonData");var c=i.data("ajaxSettings"),a=i.data("events");!1!==a&&$(a).each(function(a,e){var t=i.attr("id")+"_"+e.date,n=$("#"+t),r=$("#"+t+"_day");if(n.hasClass("dow-disabled"))n.data("hasEvent",!1);else{if(n.data("hasEvent",!0),void 0!==e.title&&n.attr("title",e.title),void 0===e.classname?n.addClass("event"):(n.addClass("event-styled"),r.addClass(e.classname)),void 0!==e.badge&&!1!==e.badge){var d=!0===e.badge?"":" badge-"+e.badge,s=r.data("day");r.html('<span class="badge badge-event'+d+'">'+s+"</span>")}if(void 0!==e.body){var o=!1;if("json"===u&&void 0!==e.modal&&!0===e.modal?o=!0:"ajax"===u&&"modal"in c&&!0===c.modal&&(o=!0),!0===o){n.addClass("event-clickable");var l=function(a,e,t,n){var r=$('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'),d=$('<h4 class="modal-title" id="'+a+'_modal_title">'+e+"</h4>"),s=$('<div class="modal-header"></div>');s.append(r),s.append(d);var o=$('<div class="modal-body" id="'+a+'_modal_body">'+t+"</div>"),l=$('<div class="modal-footer" id="'+a+'_modal_footer"></div>');if(void 0!==n){var i=$("<div>"+n+"</div>");l.append(i)}var u=$('<div class="modal-content"></div>');u.append(s),u.append(o),u.append(l);var c=$('<div class="modal-dialog"></div>');c.append(u);var b=$('<div class="modal fade" id="'+a+'_modal" tabindex="-1" role="dialog" aria-labelledby="'+a+'_modal_title" aria-hidden="true"></div>');return b.append(c),b.data("dateId",a),b.attr("dateId",a),b}(t,e.title,e.body,e.footer);$("body").append(l),$("#"+t).click(function(){$("#"+t+"_modal").modal()})}}}})}function M(a,e,t){var n;return a+"-"+(n=(n=e+1)<10?"0"+n:n)+"-"+(t<10?"0"+t:t)}function D(a,e,t){var n=new Date(a,e,t,0,0,0,0).getDay();return 0==n?n=6:n--,n}function S(a,e){for(var t,n,r,d=28;t=a,r=d+1,0<(n=e+1)&&n<13&&0<t&&t<32768&&0<r&&r<=new Date(t,n,0).getDate();)d++;return d}function k(a,e){!1===a&&(a=0);var t,n=o.data("currDate"),r=o.data("initDate");if(t=12*(r.getFullYear()-n.getFullYear()),t-=n.getMonth()+1,t+=r.getMonth(),!0===e){if(t<parseInt(a)-1)return!0}else if(t>=0-parseInt(a))return!0;return!1}o.attr("id","zabuto_calendar_"+Math.floor(99999*Math.random()).toString(36)),o.data("initYear",e.year),o.data("initMonth",e.month),o.data("monthLabels",e.month_labels),o.data("weekStartsOn",e.weekstartson),o.data("navIcons",e.nav_icon),o.data("dowLabels",e.dow_labels),o.data("showToday",e.today),o.data("showDays",e.show_days),o.data("showPrevious",e.show_previous),o.data("showNext",e.show_next),o.data("cellBorder",e.cell_border),o.data("jsonData",e.data),o.data("ajaxSettings",e.ajax),o.data("legendList",e.legend),o.data("actionFunction",e.action),o.data("actionNavFunction",e.action_nav),o.data("disabledDays",e.disabled_days),o.data("disabledDates",e.disabled_dates),function(){var a=parseInt(o.data("initYear")),e=parseInt(o.data("initMonth"))-1,t=new Date(a,e,1,0,0,0,0);o.data("initDate",t);var n=!0===o.data("cellBorder")?" table-bordered":"",r=$('<table class="table'+n+'"></table>');r=w(o,r,t.getFullYear(),t.getMonth());var d=function(a){var o=$('<div class="legend" id="'+a.attr("id")+'_legend"></div>'),e=a.data("legendList");(a.data("disabledDays").length||a.data("disabledDates").length)&&(e.length||(e=[]),e.push({type:"block",label:"Disabled",classname:"dow-disabled"}));"object"==typeof e&&0<e.length&&$(e).each(function(a,e){if("object"==typeof e&&"type"in e){var t="";switch("label"in e&&(t=e.label),e.type){case"text":if(""!==t){var n="";if("badge"in e){if(void 0===e.classname)var r="badge-event";else var r=e.classname;n='<span class="badge '+r+'">'+e.badge+"</span> "}o.append('<span class="legend-'+e.type+'">'+n+t+"</span>")}break;case"block":if(""!==t&&(t="<span>"+t+"</span>"),void 0===e.classname)var d="event";else var d="event-styled "+e.classname;o.append('<span class="legend-'+e.type+'"><ul class="legend"><li class="'+d+'"></li></ul>'+t+"</span>");break;case"list":if("list"in e&&"object"==typeof e.list&&0<e.list.length){var s=$('<ul class="legend"></ul>');$(e.list).each(function(a,e){s.append('<li class="'+e+'"></li>')}),o.append(s)}break;case"spacer":o.append('<span class="legend-'+e.type+'"> </span>')}}});return o}(o),s=$('<div class="zabuto_calendar"></div>');s.append(r),s.append(d),o.append(s),!1!==o.data("jsonData")&&l(o,t.getFullYear(),t.getMonth())}()}),this},$.fn.zabuto_calendar_defaults=function(){var a=new Date;return{language:!1,year:a.getFullYear(),month:a.getMonth()+1,show_previous:!0,show_next:!0,cell_border:!1,today:!1,show_days:!0,weekstartson:1,nav_icon:!1,data:!1,ajax:!1,legend:!1,action:!1,action_nav:!1,disabled_days:[],disabled_dates:[]}},$.fn.zabuto_calendar_language=function(a){switch(void 0!==a&&!1!==a||(a="en"),a.toLowerCase()){case"ar":return{month_labels:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],dow_labels:["أثنين","ثلاثاء","اربعاء","خميس","جمعه","سبت","أحد"]};case"az":return{month_labels:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dow_labels:["B.e","Ç.A","Çərş","C.A","Cümə","Şən","Baz"]};case"cn":return{month_labels:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dow_labels:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"]};case"cs":return{month_labels:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dow_labels:["Po","Út","St","Čt","Pá","So","Ne"]};case"de":return{month_labels:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dow_labels:["Mo","Di","Mi","Do","Fr","Sa","So"]};case"en":return{month_labels:["January","February","March","April","May","June","July","August","September","October","November","December"],dow_labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};case"he":return{month_labels:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dow_labels:["ב","ג","ד","ה","ו","ש","א"]};case"es":return{month_labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dow_labels:["Lu","Ma","Mi","Ju","Vi","Sá","Do"]};case"fi":return{month_labels:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dow_labels:["Ma","Ti","Ke","To","Pe","La","Su"]};case"fr":return{month_labels:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dow_labels:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]};case"hu":return{month_labels:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dow_labels:["Hé","Ke","Sze","Cs","Pé","Szo","Va"]};case"id":return{month_labels:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dow_labels:["Senin","Selasa","Rabu","Kamis","Jum'at","Sabtu","Minggu"]};case"it":return{month_labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dow_labels:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"]};case"jp":return{month_labels:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dow_labels:["月","火","水","木","金","土","日"]};case"kr":return{month_labels:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dow_labels:["월","화","수","목","금","토","일"]};case"nl":return{month_labels:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],dow_labels:["Ma","Di","Wo","Do","Vr","Za","Zo"]};case"no":return{month_labels:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dow_labels:["Ma","Ti","On","To","Fr","Lø","Sø"]};case"pl":return{month_labels:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],dow_labels:["pon.","wt.","śr.","czw.","pt.","sob.","niedz."]};case"pt":return{month_labels:["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dow_labels:["S","T","Q","Q","S","S","D"]};case"ru":return{month_labels:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dow_labels:["Пн","Вт","Ср","Чт","Пт","Сб","Вск"]};case"se":return{month_labels:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dow_labels:["Mån","Tis","Ons","Tor","Fre","Lör","Sön"]};case"sk":return{month_labels:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dow_labels:["Po","Ut","St","Št","Pi","So","Ne"]};case"tr":return{month_labels:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dow_labels:["Pts","Salı","Çar","Per","Cuma","Cts","Paz"]};case"ua":return{month_labels:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dow_labels:["Пн","Вт","Ср","Чт","Пт","Сб","Нд"]}}};